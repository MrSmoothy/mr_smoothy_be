spring.application.name=mr-smoothy

# Web Configuration
spring.mvc.servlet.path=/

# Server Configuration - Bind to all interfaces (0.0.0.0) to allow external access
server.address=0.0.0.0
server.port=${SERVER_PORT:8080}

# MinIO Configuration
# Internal endpoint for backend to connect to MinIO (used in Docker: minio:9000)
minio.endpoint=${MINIO_ENDPOINT:http://localhost:9000}
# Public endpoint for frontend to access images (must be accessible from browser: localhost:9000)
minio.publicEndpoint=${MINIO_PUBLIC_ENDPOINT:http://localhost:9000}
minio.accessKey=${MINIO_ACCESS_KEY:minioadmin}
minio.secretKey=${MINIO_SECRET_KEY:minioadmin123}
minio.bucketName=${MINIO_BUCKET_NAME:mr-smoothy-images}

# File Upload
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Database Connection Configuration
# Increase connection timeout and retry attempts
spring.datasource.hikari.connection-timeout=120000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.leak-detection-threshold=60000
# Retry connection on failure - wait longer before failing
spring.datasource.hikari.initialization-fail-timeout=120000
# Connection validation
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.validation-timeout=5000
# Disable read-only mode for connections (fix read-only connection error)
spring.datasource.hikari.read-only=false
# Transaction management
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=false

# Jackson Configuration for Java 8 Date/Time
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# USDA FoodData Central API Configuration
usda.api.key=${USDA_API_KEY:your_usda_api_key_here}
usda.api.base-url=https://api.nal.usda.gov/fdc/v1

# OpenAI API Configuration
openai.api.key=${OPENAI_API_KEY:your_openai_api_key_here}
openai.api.model=${OPENAI_MODEL:gpt-4-turbo-preview}
openai.api.base-url=https://api.openai.com/v1
